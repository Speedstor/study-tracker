{% extends 'base.html' %}
{% load static %}
{% block page-title %}Study Tracker (UCSD){% endblock %}
{% block content %}
{% include 'partials/_sidebar.html' %}
<script type="text/javascript" src="{% static 'courses/dashboard.js' %}"></script>

<div style="flex-grow: 20; overflow-x: hidden; position: relative;">

<div class="background" style="position: absolute; background: url('{% static 'src/texturedBackground.png' %}');  width: 100%; height: 100%;">
</div>

<div style="position: absolute; width: 100%; height: 100%; padding: 0px 30px;">
    <div class="" id="whiteboard" style="display: grid; grid-template-columns: 14px auto 14px; grid-template-rows: 14px auto 14px; width: 100%; margin-top: 100px;">
        {% include 'partials/_preWhiteboard.html' %}

            <div style="padding: 13px; grid-column: 2; grid-row: 2; background: #fbfbfb; display: flex; flex-direction: row; position: relative;">
                <div style="display: flex; flex-wrap: wrap; flex-direction: column; padding: 8px;">
                    {% if courses %}
                        <ul class="control-group" style="width: 180px; list-style-type: none; padding-left: 0px; margin: 0px;">
                            {% for c in courses %}
                                <label class="control control-checkbox">
                                    {{ c.course_name }}
                                        <input type="checkbox" checked="checked" />
                                    <div class="control_indicator"></div>
                                </label>
                            {% endfor %}
                        </ul>
                        <a style="margin: 0px; padding-right: 3px;" class="remarks" href="{% url 'courses:list' %}">edit</a>
                    {% else %}
                        <label>You don't have any courses yet</label>
                    {% endif %}

                    <div class="btn-group" role="group" style="margin-top: 30px;">
                        <input onchange="toggleToday()" type="checkbox" class="btn-check" name="btnGraphType" id="btnTodayGraph" autocomplete="off" checked>
                        <label class="btn btn-outline-primary btn-sm" for="btnTodayGraph">Today</label>
                        
                        <input onchange="toggleWeek()" type="checkbox" class="btn-check" name="btnGraphType" id="btnWeekGraph" autocomplete="off">
                        <label class="btn btn-outline-primary btn-sm" for="btnWeekGraph">Week</label>

                        {% comment %} 
                        <input onchange="showMonth()" type="checkbox" class="btn-check" name="btnGraphType" id="btnMonthGraph" autocomplete="off">
                        <label class="btn btn-outline-primary btn-sm" for="btnMonthGraph">Month</label>
                        {% endcomment %}
                    </div>
                </div>
                <div style="display: flex; justify-content: space-around; flex-grow: 3; flex-wrap: wrap;">
                    <div class="box dashboard-graphWeek" id="graphWeek" style="padding: 10px 16px 0px 0px; display: flex; flex-direction: column; max-height: 250px; max-width: 800px; min-width: 450px; width: 47%; height: 230px; margin-top: 4px;">
                        <h6 class="no-margin center" style="position: absolute; padding-left: 51px;">This week</h6>
                        <div id="weekChart" style="height: 100%;"></div>
                    </div>
                    <div class="box dashboard-graphToday" id="graphToday" style="padding: 10px 16px 0px 0px; display: flex; flex-direction: column; max-height: 250px; max-width: 800px; min-width: 450px; width: 47%; height: 230px; margin-top: 4px;">
                        <h6 class="no-margin center" style="position: absolute; padding-left: 86px;">Today</h6>
                        <div id="timeSpent" style="height: 100%;"></div>
                    </div>
                </div>
                <div class="hover-grab" id="moveWhiteboard" style="position: absolute; bottom: -4px; right: 2px;"><p class="sub">âœŠ drag to move</p></div>
            </div>

        {% include 'partials/_postWhiteboard.html' %}
    </div>
    <div style="display: flex; width: 100%; justify-content: center; align-items: baseline; margin-top: 3px;">
        <a class="btn btn-sm" href="{% url 'courses:add_course' %}">Add a course</a>
        <a class="btn btn-sm" href="{% url 'courses:start_study_session' %}">Start a study session</a>
    </div>
    <div style="display: flex; width: 100%; justify-content: center; align-items: baseline;">
        {% if courses %}
            <p class="sub">Quick Links:</p>
            {% for c in courses %}
                <a style="margin: 0px 10px;" href="/courses/{{ c.id }}/">{{ c.course_name }}</a>
            {% endfor %}
        {% else %}
            <p>You have no courses yet.</p>
        {% endif %}
    </div>


</div>
</div>

    <script>
        window.addEventListener("load", () => {
            console.log("hge");
            var chart = bb.generate({
            data: {
                columns: [
                ["CAT 1", 0, 2.00, 2.00, 4.00, 0, 2.50, .10, .10],
                ["math 18", 1.30, 1.00, 0, 2.00, 0, 5.0, .10, .10],
                ["MATH 20c", 0, 2.00, 2.00, 0, 2.50, 2.50, 10, .10],
                ["cse 11", 1.30, 1.00, 0, 2.00, 0, 5.0, 1.0, .10],
                ["total", 2.80, 6.00, 4.00, 8.00, 2.30, 6.00, .40, .40]
                ],
                type: "bar", // for ESM specify as: bar()
                types: {
                    "total": "spline"
                },
                groups: [
                ["CAT 1",
            "math 18",
            "MATH 20c",
            "cse 11",
                ]
                ],
            colors:{
            },
            },
            grid: {
                y: {
                lines: [
                    {
                    value: 0
                    }
                ]
                }
            },
            bindto: "#weekChart"
            });

            
            var chart = bb.generate({
            data: {
                order: null,
                columns: [
                ["transparent0", 10, 9, 10.5, 11],
                ["gap1", 0, 2.00, 2.00, 4.00],
                ["transparent1", 1.30, 1.00, 0, 2.00],
                ["gap3", 0, 2.00, 2.00, 0],
                ["gap4", 1.30, 1.00, 0, 2.00],
                ["transparent2", 1.30, 1.00, 0, 2.00],
                ["gap5", 1.30, 1.00, 0, 2.00],
                ["transparent3", 5, 1.00, 0, 2.00],
                ],
                type: "bar", // for ESM specify as: bar()
                groups: [
                ["gap1",
                "gap2",
                "gap3",
                "gap4",
                "gap5",
                "transparent1",
                "transparent2",
                "transparent3",
                "transparent0",
                ]
                ],
            colors:{
                "transparent1": "#00000000",
                "transparent2": "#00000000",
                "transparent3": "#00000000",
                "transparent0": "#00000000",
            },
            },
            grid: {
                y: {
                lines: [
                    {
                    value: 0
                    }
                ]
                }
            },
            axis:{
                rotated: true,
                x:{
                    type: "category",
                    categories: [
                        "cat1",
                        "math 18",
                        "cse 11",
                        "math 20c",
                    ]
                },
            },
            legend: {
                show: false
            },
            bindto: "#timeSpent"
            });
        })
    </script>

{% endblock %}

